"use strict";function SuperArray(t,i){return t=t?t.slice():[],i||(i=function(t){return t.id}),t.positions={},t.forEach(function(n,s){t.positions[i(n)]=s}),new Proxy(t,{get:function(t,n){switch(n){case"push":return function(){var s=Array.from(arguments);s.forEach(function(n,s){t.positions[i(n)]=t.length+s});var o=JSON.parse(JSON.stringify(t.positions)),r=t[n].apply(this,s);return t.positions=o,r};case"unshift":return function(){var s=Array.from(arguments);Object.keys(t.positions).forEach(function(i){t.positions[i]+=s.length}),s.forEach(function(n,s){t.positions[i(n)]=s});var o=JSON.parse(JSON.stringify(t.positions)),r=t[n].apply(this,s);return t.positions=o,r};case"shift":return function(){if(0!==t.length){var s=i(t[0]);delete t.positions[s],Object.keys(t.positions).forEach(function(i){t.positions[i]--});var o=JSON.parse(JSON.stringify(t.positions)),r=t[n].apply(this);return t.positions=o,r}};case"pop":return function(){if(0!==t.length){var s=i(t[t.length-1]);delete t.positions[s];var o=JSON.parse(JSON.stringify(t.positions)),r=t[n].apply(this);return t.positions=o,r}};case"reverse":return function(){Object.keys(t.positions).forEach(function(i,n,s){t.positions[i]=-1*(t.positions[i]-(s.length-1))});var i=JSON.parse(JSON.stringify(t.positions)),s=t[n].apply(this);return t.positions=i,s};case"splice":return function(){var s=Array.from(arguments),o=0;void 0!==s[0]&&(o=s[0]<0?Math.abs(s[0])>t.length?0:t.length-Math.abs(s[0]):s[0]>t.length?t.length:s[0]);var r=t.length-o;void 0!==s[1]&&(r=s[1]>t.length-o?t.length-o:s[1]);var e=s.slice(2);if(e.length>0)for(p=o;p<t.length;p++){a=i(t[p]);t.positions[a]+=e.length-1}for(var p=o;p<r+o;p++){var a=i(t[p]);delete t.positions[a]}e.forEach(function(n,s){t.positions[i(n)]=s+o});var u=JSON.parse(JSON.stringify(t.positions)),f=t[n].apply(this,s);return t.positions=u,f};case"sort":return function(s){return t[n].apply(this,s),t.positions={},t.forEach(function(n,s){t.positions[i(n)]=s}),t};case"get":return function(i){return t[t.positions[i]]};default:return t[n]}},set:function(t,n,s){var o=i(s);t[n]&&delete t.positions[o],t[n]=s;var r=parseInt(n);return"number"!=typeof r||isNaN(r)||(t.positions[i(s)]=r),!0}})}module.exports=SuperArray;